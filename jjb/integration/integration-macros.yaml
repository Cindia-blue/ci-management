- parameter:
    name: integration-test-plan
    parameters:
      - string:
          name: TESTPLAN
          default: '{test-plan}'
          description: 'General test plan we will run unless stream-specific one is found'

- parameter:
    name: integration-test-options
    parameters:
      - string:
          name: TESTOPTIONS
          default: '{test-options}'
          description: 'Robot command options'

- builder:
    name: integration-install-robotframework
    builders:
      - shell:
          !include-raw:
            - include-raw-integration-install-robotframework.sh

- builder:
    name: integration-run-test
    builders:
      - shell:
          !include-raw:
            - include-raw-integration-run-test.sh

- trigger:
    name: csit-patch-submitted
    triggers:
      - gerrit:
          server-name: 'Open-O'
          trigger-on:
            - patchset-created-event:
                exclude-drafts: 'false'
                exclude-trivial-rebase: 'false'
                exclude-no-code-change: 'false'
            - draft-published-event
            - comment-added-contains-event:
                comment-contains-value: 'recheck'
            - comment-added-contains-event:
                comment-contains-value: 'reverify'
          projects:
            - project-compare-type: 'ANT'
              project-pattern: '{name}'
              branches:
                - branch-compare-type: 'ANT'
                  branch-pattern: '**/{branch}'
              file-paths:
                - compare-type: 'ANT'
                  pattern: '{pattern}'
          skip-vote:
            successful: true
            failed: true
            unstable: true
            notbuilt: true
